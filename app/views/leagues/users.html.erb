<div class="page-header">
  <h1> League Members </h1>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Avatar</th>
        <th>League Member</th>
        <th colspan="2" class="text-center">Actions</th>
      </tr>

      <% @users.each do |user| %>
      <tr>
        <td><img src="<%= user.avatar %>" width="75"></td>
        <td><%= user.username %></td>
          <% if current_user.id == user.id %>
            <% membership = Membership.where({ :user_id => current_user.id, :league_id => params[:id]}) %>
        <td>
            <a href="/delete_membership/<%= membership.first.id %>" class="btn btn-danger">Leave this league</a>
        </td>
        <td>
          <a href="/users/<%= user.id %>" class="btn btn-primary">Show</a>
        </td>
          <% else %>
        <td> </td>
        <td colspan="2">
          <a href="/users/<%= user.id %>" class="btn btn-primary">Show</a>
        </td>
          <% end %>
      </tr>
      <% end %>
    </table>
  </div>
</div>
